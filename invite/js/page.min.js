var g=function(id){return document.getElementById(id)||null;};function initMusic(){var control=g('audio-control');var audio=g('audio');control.addEventListener('mousedown',function(){var cls=this.className;if(cls=='music-stop'){this.className='music-stop music-play';audio.play();}
else{this.className='music-stop';audio.pause();}});}
var allwidth;var pagewidth;var pageNum;$(function(){loading.init('page',function(){$('.loading').hide();initPages();},true);$('body').on('touchstart',function(e){var target=e.target;if(target.tagName=='A'||target.parentNode.tagName=='A'||target.tagName=='SPAN'){}
else{e.preventDefault();}});});var loading=(function(){var allcount;var startTime;var loadedCount=0;var loadImgs=[];var isForcetime;var forceTime=1000;var callbackFn=function(){};function init(classname,readycallback,forcetime){if(forcetime){isForcetime=1;}
if(typeof readycallback=='function'){callbackFn=readycallback;}
var imgMap={};$('.'+classname).each(function(i){var page=$(this);var bgimg=page.css('background-image');if(bgimg=='none'||imgMap[bgimg]){return;}
imgMap[bgimg]=1;bgimg=bgimg.replace(/\'|\"/,'').replace('url(','').replace(')','')
loadImgs.push(bgimg);page.find('img').each(function(){var url=this.src;if(imgMap[url]){return;}
imgMap[url]=1;loadImgs.push(url);});});allcount=loadImgs.length;startTime=new Date();start();check();}
function start(){$.each(loadImgs,function(i,imgurl){var img=new Image();img.src=imgurl;img.onload=function(){if(this.complete){loadedCount++;}};});}
function check(){var nowTime=new Date();var gap=nowTime-startTime;if(isForcetime){if(loadedCount>=allcount&&gap>forceTime){callbackFn();}
else{setTimeout(function(){check();},200);}}
else{if(loadedCount>=allcount){callbackFn();}
else{setTimeout(function(){check();},200);}}}
return{init:init};})();function initPages(){var bright=$(window).width()*3;$('.line-bright img').width(bright);var rotate_sz=$(window).width()*2;$('.p5-sz img').width(rotate_sz);initMusic();var winWidth=$(window).width();var pages=$('.page');pageNum=pages.length;pages.width(winWidth);pagewidth=winWidth;allwidth=winWidth*pageNum;$('.package').width(allwidth);$('.page1').addClass('page-show');step=winWidth/16;trans();}
var timer;var offsetX=0;var step;var bgtimer;var timegap=1000;function start(){if(timer){clearInterval(timer);}
timer=setInterval(function(){trans();},timegap);bgtimer=setInterval(function(){bgtranslate();},timegap);}
function stop(){if(timer){clearInterval(timer);}
if(bgtimer){clearInterval(bgtimer);}}
var pageIndex=-1;var stoptime=5000;var lineLeft=0;var circleX=0;function trans(){var curIndex=Math.abs(Math.floor(-offsetX/pagewidth));var showIndex=Math.abs(Math.ceil(-offsetX/pagewidth));if(showIndex!=pageIndex){var nowPage=$('.page'+(showIndex+1));nowPage.addClass('page-show');var time=5000;if(showIndex==1){time=8000;}
console.log(time);setTimeout(function(){nowPage.find('.page-title').addClass('disappear');},time);}
if(curIndex!=pageIndex){stop();console.log(curIndex,pageIndex);var delay=stoptime;if(curIndex==5){delay+=6000;}
if(curIndex==1){delay+=3000;}
if(curIndex==0){delay=2000;}
pageIndex=curIndex;setTimeout(function(){start();},delay);if(pageIndex>=6){$('.a-dd').addClass('a-dd-show');}
if(pageIndex>3&&pageIndex<6){$('.p5-sz').addClass('p5-sz-show');}
else{$('.p5-sz').removeClass('p5-sz-show');}
if(pageIndex>0&&pageIndex<4){$('.line-bright').addClass('line-bright-show');}
else{$('.line-bright').removeClass('line-bright-show');}
return false;}
if(offsetX<=-allwidth+pagewidth){stop();return false;}
offsetX=offsetX-pagewidth;$('.package').css({transform:'translate('+offsetX+'px,0)'});}
function bgtranslate(){if(pageIndex>0&&pageIndex<4){lineLeft-=pagewidth;$('.line-bright').css('left',lineLeft+'px');}
if(pageIndex>3&&pageIndex<6){circleX-=pagewidth;$('.p5-sz').css('margin-left',circleX+'px');}}